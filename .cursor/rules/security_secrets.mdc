---
description: Secrets handling, environment configuration, and MCP safety
globs: **/*
alwaysApply: true
---

- **Never commit secrets**
  - API keys, tokens, and private endpoints must never be committed to git.
  - Keep local secrets in `.env.local` (ignored) or in `.cursor/mcp.json` which must be git-ignored.

- **Cursor MCP config**
  - Do not commit real keys in `.cursor/mcp.json`. If already committed, rotate keys immediately and replace with placeholders.
  - Ensure `.gitignore` includes `.cursor/mcp.json`.

- **Environment files**
  - Provide an `.env.example` with placeholder keys. Do not include values.
  - Use `.env.local` for developer-specific values (not committed).
  - For browser-exposed envs, use the `NEXT_PUBLIC_` prefix.

- **Server vs Client**
  - Access secrets only in Server Components, route handlers, or server utilities.
  - Never read secrets from Client Components.

- **Usage example (server-only)**
  ```ts
  export function getOpenAIKey(): string {
    const key = process.env.OPENAI_API_KEY;
    if (!key) throw new Error("OPENAI_API_KEY is missing");
    return key;
  }
  ```

- **Suggested keys**
  - OPENAI_API_KEY, ANTHROPIC_API_KEY, PERPLEXITY_API_KEY, GOOGLE_API_KEY, XAI_API_KEY
  - OPENROUTER_API_KEY, MISTRAL_API_KEY, AZURE_OPENAI_API_KEY, AZURE_OPENAI_ENDPOINT
  - OLLAMA_API_KEY, OLLAMA_BASE_URL (default `http://localhost:11434/api`)

